"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _class,_temp2,_createClass=function(){function o(t,e){for(var a=0;a<e.length;a++){var o=e[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(t,e,a){return e&&o(t.prototype,e),a&&o(t,a),t}}(),_get=function t(e,a,o){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,a);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:t(r,a,o)}if("value"in n)return n.value;var i=n.get;return void 0!==i?i.call(o):void 0},_index=require("../../../npm/@tarojs/taro-weapp/index.js"),_index2=_interopRequireDefault(_index),_index3=require("../../../config/index.js");function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var curStatus=8,curPage=0,cardid="",value=0,Orderlist=(_temp2=_class=function(t){function i(){var t,e,a;_classCallCheck(this,i);for(var o=arguments.length,n=Array(o),r=0;r<o;r++)n[r]=arguments[r];return(e=a=_possibleConstructorReturn(this,(t=i.__proto__||Object.getPrototypeOf(i)).call.apply(t,[this].concat(n)))).$usedState=["anonymousState__temp","anonymousState__temp2","anonymousState__temp3","anonymousState__temp4","anonymousState__temp5","anonymousState__temp6","anonymousState__temp7","anonymousState__temp8","anonymousState__temp9","goodsList","globalData","tabList","current","addrimg","dargStyle","downDragStyle","downText","upDragStyle","pullText","start_p","scrollY","dargState"],a.config={navigationBarTitleText:"订单列表页",onReachBottomDistance:50},a.$$refs=[],_possibleConstructorReturn(a,e)}return _inherits(i,_index.Component),_createClass(i,[{key:"_constructor",value:function(t){_get(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"_constructor",this).call(this,t),this.state={current:0,goodsList:[],addrimg:_index3.PATH+"/mImages/wddd1.png",dargStyle:{top:"0px"},downDragStyle:{height:"0px"},downText:"下拉刷新",upDragStyle:{height:"0px"},pullText:"上拉加载更多",start_p:{},scrollY:!0,dargState:0}}},{key:"onPullDownRefresh",value:function(){console.log("下拉事件111111111111111"),curPage=0,this.setState({goodsList:[]}),this.getOrdersup()}},{key:"onReachBottom",value:function(){console.log("上拉事件1111111111111111111111"),this.getOrders()}},{key:"componentWillMount",value:function(){console.log(this.$router.params),this.$router.params.cardid&&(cardid=this.$router.params.cardid),this.$router.params.state&&(curStatus=Number(this.$router.params.state)),this.$router.params.value&&(value=this.$router.params.value,console.log(value),this.setState({current:Number(value)})),console.log("cardid"),console.log(cardid),this.getOrdersup()}},{key:"componentDidMount",value:function(){}},{key:"componentDidShow",value:function(){}},{key:"componentDidHide",value:function(){}},{key:"componentDidCatchError",value:function(){}},{key:"getOrdersup",value:function(){var e=this,t=curPage+1;_index2.default.showLoading({title:""}),_index2.default.request({url:_index3.BASE_URL+"order/orderlist",data:{page:t,rows:5,status:curStatus,cardid:cardid},header:{"content-type":"application/json",token:_index3.globalData.token},success:function(t){_index2.default.hideLoading(),console.log("订单数据列表："),console.log(t.data.data.data),e.setState({goodsList:t.data.data.data})}})}},{key:"getOrders",value:function(){var e=this,t=curPage+1;curPage=t,_index2.default.showLoading({title:""}),_index2.default.request({url:_index3.BASE_URL+"order/orderlist",data:{page:t,rows:5,status:curStatus,cardid:cardid},header:{"content-type":"application/json",token:_index3.globalData.token},success:function(t){_index2.default.hideLoading(),console.log("订单数据列表："),console.log(t.data.data.data),t.data.data.hasnext||(_index2.default.showLoading({title:"没有数据更新了"}),setTimeout(function(){_index2.default.hideLoading()},1500)),e.setState({goodsList:e.state.goodsList.concat(t.data.data.data)})}})}},{key:"handleClick",value:function(t){console.log(t),0==t&&(curStatus=8,curPage=0),1==t&&(curStatus=6,curPage=0),2==t&&(curStatus=7,curPage=0),this.setState({current:t}),this.getOrdersup()}},{key:"toOrderDetail",value:function(t){_index2.default.navigateTo({url:"/pages/orders/orderdetail/orderdetail?orderid="+t})}},{key:"touchEnd",value:function(t){1===this.state.dargState?this.down():-1===this.state.dargState&&this.pull(),this.reduction()}},{key:"pull",value:function(){console.log("上拉"),this.onReachBottom()}},{key:"down",value:function(){console.log("下拉"),this.onPullDownRefresh()}},{key:"reduction",value:function(){var t=this;this.setState({upDragStyle:{height:"0px",transition:"all 0.5s"},dargState:0,dargStyle:{top:"0px",transition:"all 0.5s"},downDragStyle:{height:"0px",transition:"all 0.5s"},scrollY:!0}),setTimeout(function(){t.setState({dargStyle:{top:"0px"},upDragStyle:{height:"0px"},pullText:"上拉加载更多",downText:"下拉刷新"})},500)}},{key:"ScrollToUpper",value:function(){console.log("滚动到顶部事件")}},{key:"ScrollToLower",value:function(){console.log("滚动到底部事件")}},{key:"touchStart",value:function(t){this.setState({start_p:t.touches[0]})}},{key:"touchmove",value:function(t){var e=t.touches[0],a=this.state.start_p.clientX,o=this.state.start_p.clientY,n=e.clientX,r=e.clientY;if(Math.abs(n-a)/Math.abs(r-o)<.3){var i=Math.abs(r-o)/3.5;0<r-o&&(50<=i?this.setState({dargState:1,downText:"释放刷新"}):this.setState({dargState:0,downText:"下拉刷新"}),100<=i&&(i=100),this.setState({dargStyle:{top:i+"px"},downDragStyle:{height:i+"px"},scrollY:!1})),0<o-r&&(console.log("上拉操作"),50<=i?this.setState({dargState:-1,pullText:"释放加载更多"}):this.setState({dargState:0,pullText:"上拉加载更多"}),100<=i&&(i=100),this.setState({dargStyle:{top:-i+"px"},upDragStyle:{height:i+"px"},scrollY:!1}))}}},{key:"_createData",value:function(){this.__state=arguments[0]||this.state||{},this.__props=arguments[1]||this.props||{};arguments[2],this.__state.goodsList;var t=this.__state.dargStyle,e=this.__state.downDragStyle,a=this.__state.upDragStyle,o=(0,_index.internal_inline_style)(e),n=(0,_index.internal_inline_style)(t),r=(0,_index.internal_inline_style)(a),i=(0,_index.internal_inline_style)(e),s=(0,_index.internal_inline_style)(t),l=(0,_index.internal_inline_style)(a),u=(0,_index.internal_inline_style)(e),c=(0,_index.internal_inline_style)(t),d=(0,_index.internal_inline_style)(a);return Object.assign(this.__state,{anonymousState__temp:o,anonymousState__temp2:n,anonymousState__temp3:r,anonymousState__temp4:i,anonymousState__temp5:s,anonymousState__temp6:l,anonymousState__temp7:u,anonymousState__temp8:c,anonymousState__temp9:d,globalData:_index3.globalData,tabList:[{title:"已完成"},{title:"待支付"},{title:"转退款"}]}),this.__state}}]),i}(),_class.properties={},_class.$$events=["toOrderDetail","handleClick","touchmove","touchEnd","touchStart","ScrollToUpper","ScrollToLower"],_temp2);exports.default=Orderlist,Component(require("../../../npm/@tarojs/taro-weapp/index.js").default.createComponent(Orderlist,!0));