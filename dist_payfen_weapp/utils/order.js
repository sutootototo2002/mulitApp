"use strict";var _index=require("../config/index.js"),_index2=require("../npm/@tarojs/taro-weapp/index.js"),_index3=_interopRequireDefault(_index2);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var ArrayList=[];function stopInterval(){ArrayList.forEach(function(e,t){clearInterval(e)}),ArrayList=[],_index.globalData.timerTem=0}function orderstatus(e,t){startqueryorderstatus(e,t)}function startqueryorderstatus(e,t){_index.globalData.timerTem=setInterval(function(){requestorderstatus(e,t),console.log(new Date+"_"+_index.globalData.requestcount)},2e3),ArrayList.push(_index.globalData.timerTem),console.log("globalData.timerTem00000000000000000000000"),console.log(_index.globalData.timerTem)}function shoppingorder(r){_index3.default.request({url:_index.BASE_URL+"order/shoppingorder",data:{},header:{"content-type":"application/json",token:_index.globalData.token},timeout:1e3,success:function(e){if(200==e.data.code){var t=e.data.data;console.log("---getShoppingOrder(购物中订单)---"),console.log(t),r(t)}}})}function requestorderstatus(e,t){_index.globalData.requestcount++,_index3.default.request({url:_index.BASE_URL+"device/orderstatus",data:{orderid:e,times:_index.globalData.requestcount},timeout:1e3,header:{"content-type":"application/json",token:_index.globalData.token},method:"POST",success:function(e){console.log(e),t(e)},fail:function(e){console.log(e)}})}module.exports={orderstatus:orderstatus,shoppingorder:shoppingorder,stopInterval:stopInterval,startqueryorderstatus:startqueryorderstatus,requestorderstatus:requestorderstatus};